<?phpclass ContentController extends CI_Controller {    function __construct() {        parent::__construct();        $this->is_logged_in();    }    function contentform() {        if ($this->uri->segment(5) != null && $this->uri->segment(5) != 0) {            $this->load->model('Content');            $content = new Content();            $data['content'] = $content->get_by_id($this->uri->segment(5));            $this->load->model('File');            $file = new File();            $file->where("content_id", $this->uri->segment(5));            $data['files'] = $file->get();        }        if ($this->uri->segment(6) != null) {            $data['parent'] = '/' . $this->uri->segment(6);        }        $this->load->model('ContentType');        $contenttype = new ContentType();        $this->load->model('Language');        $language = new Language();        $data['contentTypes'] = $contenttype->get();        $data['languages'] = $language->get();        $data['main_content'] = 'backend/content/contentform_view';        $this->load->view('backend/includes/template', $data);    }    function ordercontents() {        $this->load->model('Content');        $content = new Content();        if ($this->uri->segment(5) != null) {            $content->where('parent', $this->uri->segment(5));            $data['parent'] = '/' . $this->uri->segment(5);        } else {            $content->where('parent', NULL);            $data['parent'] = '';        }        $content->order_by('content_order', 'asc');        $data['contents'] = $content->get();        $data['main_content'] = 'backend/content/ordercontents_view';        $this->load->view('backend/includes/template', $data);    }    function saveordercontents() {        $this->load->model('Content');        $i = 1;        foreach ($this->input->post() as $key => $value) {            $content = new Content();            $contentObject = $content->get_by_id($value);            $contentObject->content_order = $i;            $i++;            $contentObject->save();        }        $parent = '';        if ($this->uri->segment(5) != null)            $parent = '/' . $this->uri->segment(5);        redirect('backend/contentcontroller/home' . $parent);    }    function delete() {        if ($this->uri->segment(5) != null) {            $this->load->model('Content');            $content = new Content();            $content->where('id', $this->uri->segment(5));            $content->get();            $content->delete();        }        $parent = '';        if ($this->uri->segment(6) != null)            $parent = '/' . $this->uri->segment(6);        redirect('backend/contentcontroller/home' . $parent);    }    function home() {        $data['main_content'] = 'backend/content/home_view';        $this->load->model('Content');        $content = new Content();        if ($this->uri->segment(5) != null) {            $content->where('parent', $this->uri->segment(5));            $data['parent'] = '/' . $this->uri->segment(5);        } else {            $content->where('parent', NULL);            $data['parent'] = '';        }        $content->order_by('id');        $data['query'] = $content->get();        $this->load->view('backend/includes/template', $data);    }    function savecontent() {        $this->load->model('Content');        $contentmodel = new Content();        $contentmodel->title = $this->input->post('title');        $contentmodel->language_id = $this->input->post('language');        $contentmodel->date = $this->input->post('date');        if ($this->input->post('view') != null)            $contentmodel->view = $this->input->post('view');        $contentmodel->body = $this->input->post('body');        $contentmodel->header_menu = $this->input->post('header_menu');//        $contentmodel->content_order = $this->input->post('order');        $contentmodel->contenttype_id = $this->input->post('content_type');        $contentmodel->status = $this->input->post('status');        $contentmodel->name = $this->input->post('name');        if ($contentmodel->contenttype_id == 1)            $contentmodel->url = 'home/index/';        else if ($contentmodel->contenttype_id == 2)            $contentmodel->url = 'home/contactus/';        else if ($contentmodel->contenttype_id == 3)            $contentmodel->url = 'home/aboutus/';        else if ($contentmodel->contenttype_id == 4) {            $contentmodel->url = 'home/news/';            if ($this->input->post('parent') != null)                $contentmodel->url = 'home/single_news/';        }        else if ($contentmodel->contenttype_id == 5)            $contentmodel->url = 'home/services/';        else if ($contentmodel->contenttype_id == 6) {            $contentmodel->url = 'home/projects/';            if ($this->input->post('parent') != null)                $contentmodel->url = 'home/project/';        }        else if ($contentmodel->contenttype_id == 7)            $contentmodel->url = 'home/profile/';        else if ($contentmodel->contenttype_id == 8)            $contentmodel->url = 'home/clients/';        if ($this->input->post('id') != '')            $contentmodel->id = $this->input->post('id');        $parent = '';        if ($this->input->post('parent') != null) {            $contentmodel->parent = $this->input->post('parent');            $parent = '/' . $this->input->post('parent');        }        $contentmodel->save();        if ($this->uri->segment(5) != null) {            redirect('backend/contentcontroller/contentform/' . $contentmodel->id . $parent);        }        redirect('backend/contentcontroller/home' . $parent);    }    function is_logged_in() {        $is_logged_in = $this->session->userdata('is_logged_in');        if (!isset($is_logged_in) || $is_logged_in != true) {            redirect("backend/login/accessdenaied");            die();        }    }}?>