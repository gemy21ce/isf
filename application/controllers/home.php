<?phpinclude_once 'mail/Mailer.php';class Home extends CI_Controller {    function __construct() {        parent::__construct();        $this->load->model('configuration');    }    function index() {        $data['main_content'] = 'common/login/login_view';        echo '</br></br></br>ssss</br>';        $this->load->view('frontend/includes/template', $data);    }    function login(){        $user = new User();        $username = $this->input->post('username');        $password = $this->input->post('password');        $user->where('username', $username);        $user->where('password', sha1($password));        $user->where('password', $password);        $loadedUser = $user->get();                //user logged in.        if ($loadedUser->id) {            $data = array(                'username' => $loadedUser->name,                'usertype' => $loadedUser->role->role,                'id'=>$loadedUser->id,                'is_logged_in' => true            );                        $this->session->set_userdata($data);                        $user->where('username',$username)->update('last_login', date("Y-m-d H:i:s"));            if ($loadedUser->type == 'admin') {                redirect(base_url() . 'admin');                return;            }            //do check for other users types            if ($this->input->post('target-url'))                $url = $this->input->post('target-url');                        redirect($url);        } else {            $this->load->helper('language');            $this->lang->load('home');            $data['errormessage'] = 'true';            $data['main_content'] = 'common/login/login_view';            $this->load->view('frontend/includes/template', $data);        }    }        private function sendmail() {        $mail = new Mailer();        $this->load->model('Configuration');        $configuration = new Configuration();        $conf = $configuration->get();        $sentmail = $conf->email;        $sentpassword = $conf->password;        if (!empty($conf->receiver_mail_1))            $data[] = $conf->receiver_mail_1;        if (!empty($conf->receiver_mail_2))            $data[] = $conf->receiver_mail_2;        if (!empty($conf->receiver_mail_3))            $data[] = $conf->receiver_mail_3;        $subject = $this->input->post('subject');        $clientMail = $this->input->post('clientMail');        $message = $this->input->post('message');        $mail->SendTaskMail($data, $subject, $sentmail,  $clientMail . ' has sent the following :<br/>' . $message, $sentmail, $sentpassword);        redirect($this->input->post('url') . '/1');    }}?>