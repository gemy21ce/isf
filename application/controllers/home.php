<?phpinclude_once 'mail/Mailer.php';class Home extends CI_Controller {    function __construct() {        parent::__construct();        $this->load->model('configuration');        $this->load->helper('language');    }    function index() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        $this->lang->load('home');        $this->load->model('content');        $this->load->model('file');        $content = new Content();        $slider = new Content();        $file = new File();        $content->where("contenttype_id", 1);        $content->where("language_id", $laguageObject->id);        $content->where("status", "ACTIVE");        $homeContent = $content->get(1);        $file->where('content_id', $homeContent->id);        $slider->where("status", "ACTIVE");        $slider->where("parent", $homeContent->id);        $data['content'] = $homeContent;        $data['sliders'] = $slider->get();        $data['homefile'] = $file->get();        $data['main_content'] = 'frontend/home_view';        $this->load->view('frontend/includes/template', $data);    }    function contactus() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);       $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        if ($this->uri->segment(4) != null && $this->uri->segment(4) != 0) {            $this->load->model('content');            $content = new Content();            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($this->uri->segment(4));            $this->load->model('file');            $file = new File();            $file->where('content_id', $this->uri->segment(4));            $data['files'] = $file->get();        } else {            $this->load->model('content');            $content = new Content();            $content->where("status", "ACTIVE");            $content->where("contenttype_id", "2");            $data['content'] = $content->get(1);            $this->load->model('file');            $file = new File();            $file->where('content_id', $data['content']->id);            $data['files'] = $file->get();        }        if ($this->uri->segment(5) != null)            $data['message'] = 'home.messagehasbeensent';        $data['main_content'] = 'frontend/content/contactus_view';        $this->load->view('frontend/includes/template', $data);    }    function aboutus() {//        $this->load->model('content_model');//        $data['menuItems'] = $this->content_model->getMenu();        if ($this->uri->segment(3) != null) {            $this->load->model('content');            $this->load->model('file');            $content = new Content();            $file = new File();            $file->where('content_id', $this->uri->segment(3));            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($this->uri->segment(3));            $data['files'] = $file->get();        }        $data['main_content'] = 'frontend/content/aboutus_view';        $this->load->view('frontend/includes/template', $data);    }    function news() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);       $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        $this->load->model('content');        $newsId = $this->uri->segment(4);        if ($newsId != null) {            $content = new Content();            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($newsId);        }        $data['main_content'] = 'frontend/content/news_view';        $news_singles = new Content();        $news_singles->where('parent', $data['content']->id);        $news_singles->where('status', 'ACTIVE');        //pagenation        $total = $news_singles->count();        $this->load->library('pagination');        $data['total'] = $total;        $perPage = 8;        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;        $config['base_url'] = base_url() . $laguageObject->code . "/home/news/" . $newsId;        $config["uri_segment"] = 5;        $config['total_rows'] = $total;        $config['per_page'] = $perPage;        $config['next_tag_open'] = '<div class="next">';        $config['next_link'] = 'Next';        $config['next_tag_close'] = '</div>';        $config['prev_tag_open'] = '<div class="back">';        $config['prev_link'] = 'Back';        $config['prev_tag_close'] = '</div>';        $config['display_pages'] = FALSE;        $this->pagination->initialize($config);        $data["links"] = $this->pagination->create_links();        //pagenation        $news = new Content();        $news->where('parent', $newsId);        $news->where('status', 'ACTIVE');        $result = $news->get_paged($page, $perPage);        $data['result'] = $result;        $this->load->view('frontend/includes/template', $data);    }    function projects() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        $this->load->model('content');        $contentId = $this->uri->segment(4);        if ($contentId != null) {            $content = new Content();            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($contentId);        }        $contents = new Content();        $contents->where('parent', $data['content']->id);        $contents->where('status', 'ACTIVE');        //pagenation        $total = $contents->count();        $this->load->library('pagination');        $data['total'] = $total;        $perPage = 12;        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;        $config['base_url'] = base_url() . $laguageObject->code . "/home/projects/" . $contentId;        $config["uri_segment"] = 5;        $config['total_rows'] = $total;        $config['per_page'] = $perPage;        $config['next_tag_open'] = '<div class="next">';        $config['next_link'] = 'Next';        $config['next_tag_close'] = '</div>';        $config['prev_tag_open'] = '<div class="back">';        $config['prev_link'] = 'Back';        $config['prev_tag_close'] = '</div>';        $config['display_pages'] = FALSE;        $this->pagination->initialize($config);        $data["links"] = $this->pagination->create_links();        //pagenation        $data['main_content'] = 'frontend/content/projects_view';        $news = new Content();        $news->where('parent', $contentId);        $news->where('status', 'ACTIVE');        $result = $news->get_paged($page, $perPage);        $data['result'] = $result;        $this->load->view('frontend/includes/template', $data);    }    function single_news() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        if ($this->uri->segment(4) != null) {            $this->load->model('content');            $this->load->model('file');            $content = new Content();            $parent = new Content();            $content->where("status", "ACTIVE");            $parent->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($this->uri->segment(4));            $data['parent'] = $parent->get_by_id($data['content']->parent);            $file = new File();            $file->where('content_id', $this->uri->segment(4));            $data['files'] = $file->get();        }        $data['main_content'] = 'frontend/content/news_single_view';        $this->load->view('frontend/includes/template', $data);    }    function project() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        if ($this->uri->segment(4) != null) {            $this->load->model('content');            $this->load->model('file');            $content = new Content();            $parent = new Content();            $content->where("status", "ACTIVE");            $parent->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($this->uri->segment(4));            $data['parent'] = $parent->get_by_id($data['content']->parent);            $file = new File();            $file->where('content_id', $this->uri->segment(4));            $data['files'] = $file->get();        }        $data['main_content'] = 'frontend/content/project_view';        $this->load->view('frontend/includes/template', $data);    }    function subscribe() {        $email = $this->input->post('email');        $subscriber = new Subscriber();        $subscriber->where('email', $email);        $subscriber->get();        if ($subscriber->result_count() > 0) {            echo 'This user is already exist';        } else {            $subscriber->email = $email;            $subscriber->save();            echo 'Thanks for subscribtion.';        }    }    function services() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        $this->load->model('content');        $servicesId = $this->uri->segment(4);        if ($servicesId != null) {            $content = new Content();            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($servicesId);        }        $data['main_content'] = 'frontend/content/services_view';        $service = new Content();        $service->where('parent', $data['content']->id);        $service->where('status', 'ACTIVE');        //pagenation        $total = $service->count();        $this->load->library('pagination');        $data['total'] = $total;        $perPage = 8;        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;        $config['base_url'] = base_url() . $laguageObject->code . "/home/services/" . $servicesId;        $config["uri_segment"] = 5;        $config['total_rows'] = $total;        $config['per_page'] = $perPage;        $config['next_tag_open'] = '<div class="next">';        $config['next_link'] = 'Next';        $config['next_tag_close'] = '</div>';        $config['prev_tag_open'] = '<div class="back">';        $config['prev_link'] = 'Back';        $config['prev_tag_close'] = '</div>';        $config['display_pages'] = FALSE;        $this->pagination->initialize($config);        $data["links"] = $this->pagination->create_links();        //pagenation        $services = new Content();        $services->where('parent', $servicesId);        $services->where('status', 'ACTIVE');        $result = $services->get_paged($page, $perPage);        $data['result'] = $result;        $this->load->view('frontend/includes/template', $data);    }    function profile() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        if ($this->uri->segment(4) != null) {            $this->load->model('content');            $this->load->model('file');            $content = new Content();            $file = new File();            $file->where('content_id', $this->uri->segment(4));            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($this->uri->segment(4));            $data['files'] = $file->get();        }        $data['main_content'] = 'frontend/content/profile_view';        $this->load->view('frontend/includes/template', $data);    }    function clients() {        // language        $this->load->model('language');        $language = new Language();        $language->where("code", ($this->lang->lang() != null ? $this->lang->lang() : 'en'));        $laguageObject = $language->get(1);        $data['laguageObject']=$laguageObject;        //end language        //load translation file        $this->lang->load('home');        //end translation        $this->load->model('content');        $clientsId = $this->uri->segment(4);        if ($clientsId != null) {            $content = new Content();            $content->where("status", "ACTIVE");            $data['content'] = $content->get_by_id($clientsId);        }        $data['main_content'] = 'frontend/content/clients_view';        $client = new Content();        $client->where('parent', $data['content']->id);        $client->where('status', 'ACTIVE');        //pagenation        $total = $client->count();        $this->load->library('pagination');        $data['total'] = $total;        $perPage = 8;        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;        $config['base_url'] = base_url() . $laguageObject->code . "/home/clients/" . $clientsId;        $config["uri_segment"] = 5;        $config['total_rows'] = $total;        $config['per_page'] = $perPage;        $config['next_tag_open'] = '<div class="next">';        $config['next_link'] = 'Next';        $config['next_tag_close'] = '</div>';        $config['prev_tag_open'] = '<div class="back">';        $config['prev_link'] = 'Back';        $config['prev_tag_close'] = '</div>';        $config['display_pages'] = FALSE;        $this->pagination->initialize($config);        $data["links"] = $this->pagination->create_links();        //pagenation        $clients = new Content();        $clients->where('parent', $clientsId);        $clients->where('status', 'ACTIVE');        $result = $clients->get_paged($page, $perPage);        $data['result'] = $result;        $this->load->view('frontend/includes/template', $data);    }    function sendmail() {        $mail = new Mailer();        $this->load->model('Configuration');        $configuration = new Configuration();        $conf = $configuration->get();        $sentmail = $conf->email;        $sentpassword = $conf->password;        if (!empty($conf->receiver_mail_1))            $data[] = $conf->receiver_mail_1;        if (!empty($conf->receiver_mail_2))            $data[] = $conf->receiver_mail_2;        if (!empty($conf->receiver_mail_3))            $data[] = $conf->receiver_mail_3;        $subject = $this->input->post('subject');        $clientMail = $this->input->post('clientMail');        $message = $this->input->post('message');        $mail->SendTaskMail($data, $subject, $sentmail,  $clientMail . ' has sent the following :<br/>' . $message, $sentmail, $sentpassword);        redirect($this->input->post('url') . '/1');    }}?>